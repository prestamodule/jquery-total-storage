/*
 * TotalStorage
 *
 * Copyright (c) 2012 Jared Novack & Upstatement (upstatement.com)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Total Storage is the conceptual the love child of jStorage by Andris Reinman,
 * and Cookie by Klaus Hartl -- though this is not connected to either project.
 *
 * @name $.totalStorage
 * @cat Plugins/Cookie
 * @author Jared Novack/jared@upstatement.com
 * @version 1.1.2
 * @url http://upstatement.com/blog/2012/01/jquery-local-storage-done-right-and-easy/
 */
 
!function(t,e){var o,r,n="test";if("localStorage"in window)try{r="undefined"==typeof window.localStorage?e:window.localStorage,o="undefined"==typeof r||"undefined"==typeof window.JSON?!1:!0,window.localStorage.setItem(n,"1"),window.localStorage.removeItem(n)}catch(a){o=!1}t.totalStorage=function(e,o,r){return t.totalStorage.impl.init(e,o)},t.totalStorage.setItem=function(e,o){return t.totalStorage.impl.setItem(e,o)},t.totalStorage.getItem=function(e){return t.totalStorage.impl.getItem(e)},t.totalStorage.getAll=function(){return t.totalStorage.impl.getAll()},t.totalStorage.deleteItem=function(e){return t.totalStorage.impl.deleteItem(e)},t.totalStorage.impl={init:function(t,e){return"undefined"!=typeof e?this.setItem(t,e):this.getItem(t)},setItem:function(e,n){if(o){var a=JSON.stringify(n);return r.setItem(e,a),this.parseResult(a)}try{t.cookie(e,n)}catch(l){console.log("Local Storage not supported by this browser. Install the cookie plugin on your site to take advantage of the same functionality. You can get it at https://github.com/carhartl/jquery-cookie")}return n},getItem:function(e){if(!o)try{return this.parseResult(t.cookie(e))}catch(n){return null}var a=r.getItem(e);return this.parseResult(a)},deleteItem:function(e){if(!o)try{return t.cookie(e,null),!0}catch(n){return!1}return r.removeItem(e),!0},getAll:function(){var e=[];if(o)for(var n in r)n.length&&e.push({key:n,value:this.parseResult(r.getItem(n))});else try{for(var a=document.cookie.split(";"),l=0;l<a.length;l++){var i=a[l].split("="),u=i[0];e.push({key:u,value:this.parseResult(t.cookie(u))})}}catch(c){return null}return e},parseResult:function(t){var e;try{e=JSON.parse(t),"undefined"==typeof e&&(e=t),"true"==e&&(e=!0),"false"==e&&(e=!1),parseFloat(e)==e&&"object"!=typeof e&&(e=parseFloat(e))}catch(o){e=t}return e}}}(jQuery);
